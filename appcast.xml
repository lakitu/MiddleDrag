<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:sparkle="http://www.andymatuschak.org/xml-namespaces/sparkle">
  <channel>
    <title>MiddleDrag Updates</title>
    <link>https://middledrag.app</link>
    <description>Most recent updates to MiddleDrag</description>
    <language>en</language>
    <item>
      <title>Version 1.4.2.1</title>
      <pubDate>Fri, 13 Feb 2026 23:51:42 +0000</pubDate>
      <sparkle:version>1.4.2.1</sparkle:version>
      <sparkle:shortVersionString>1.4.2.1</sparkle:shortVersionString>
      <description><![CDATA[Fix: Add Sentry and Sparkle as package product dependencies in project configuration
---
**SHA256:** `fc440ff44fd61dec178624462c204156ccb3cb28207bd7c246b5ce3894dfde73`


[![Download MiddleDrag](https://a.fsdn.com/con/app/sf-download-button)](https://sourceforge.net/projects/middledrag.mirror/files/v1.4.2.1/MiddleDrag-1.4.2.1.pkg/download)]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.4.2.1/MiddleDrag-1.4.2.1.pkg" sparkle:edSignature="vcs4c5qoD6ydO93/gFcdzYbKzc2FtAZQfrRXQxBFF69AIBvKgytcip9dB02up/U3gVDxFdyrEKN7X9I45r5sAw==" length="3716171" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.4.2</title>
      <pubDate>Fri, 13 Feb 2026 09:28:28 +0000</pubDate>
      <sparkle:version>1.4.2</sparkle:version>
      <sparkle:shortVersionString>1.4.2</sparkle:shortVersionString>
      <description><![CDATA[
---
**SHA256:** `d1b3e3a2ffd5fec31571bd1455a75210946d23622656e82654bfd6929c328943`


## What&apos;s Changed
* refactor/updatetestsuite by @NullPointerDepressiveDisorder in https://github.com/NullPointerDepressiveDisorder/MiddleDrag/pull/103
* Fix middle-drag smoothness and add compatibility for some apps by @NullPointerDepressiveDisorder in https://github.com/NullPointerDepressiveDisorder/MiddleDrag/pull/104


**Full Changelog**: https://github.com/NullPointerDepressiveDisorder/MiddleDrag/compare/v1.4.1.4...v1.4.2

[![Download MiddleDrag](https://a.fsdn.com/con/app/sf-download-button)](https://sourceforge.net/projects/middledrag.mirror/files/v1.4.2/MiddleDrag-1.4.2.pkg/download)]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.4.2/MiddleDrag-1.4.2.pkg" sparkle:edSignature="St9ci2IyLRbhh0TbXBwxTQ8bDKk3rekDZ++J3GKKnfyE8ZPr0EenBgW0DTD+1NMypBJsWeKcLOddILPW+7fvDQ==" length="2771580" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.4.1.4</title>
      <pubDate>Sat, 07 Feb 2026 09:05:03 +0000</pubDate>
      <sparkle:version>1.4.1.4</sparkle:version>
      <sparkle:shortVersionString>1.4.1.4</sparkle:shortVersionString>
      <description><![CDATA[Bug/double tab (#99)

* Fix: Prevent double middle-clicks during multitouch gestures

* Fix: Prevent double middle-clicks by skipping gesture tracking check

* Fix: Implement click deduplication to prevent double middle-clicks from multiple sources

* Fix: Implement force-click deduplication to prevent double middle-clicks from trackpad gestures

* Fix: Enhance click deduplication with internal click count and reset functionality

* Fix: Implement thread-safe access for lastForceClickTime to enhance click deduplication
---
**SHA256:** `8b1cbfef8190e4fe60a97e719222b9c42081101e4018c9e4a939f870c3f6db17`]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.4.1.4/MiddleDrag-1.4.1.4.pkg" sparkle:edSignature="hW6LPT7LbdJOfZ0wAUPJmwAf4ULMxg6mhlKuA85DAaI6d+9vxfqCzOGux6wMXTw4Dt2ajP6QEXxLRmz1bUGNCw==" length="3497874" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.4.1.3</title>
      <pubDate>Fri, 06 Feb 2026 03:42:50 +0000</pubDate>
      <sparkle:version>1.4.1.3</sparkle:version>
      <sparkle:shortVersionString>1.4.1.3</sparkle:shortVersionString>
      <description><![CDATA[Merge pull request #96 from NullPointerDepressiveDisorder/seer/fix/multitouch-stability

Fix: Multitouch stability during rapid system changes
---
**SHA256:** `4fda97054639830b7c41aabb55c2e3c68e5ac560a0191d12ab94d4c76a632f0f`


[![Download MiddleDrag](https://a.fsdn.com/con/app/sf-download-button)](https://sourceforge.net/projects/middledrag.mirror/files/v1.4.1.3/MiddleDrag-1.4.1.3.pkg/download)]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.4.1.3/MiddleDrag-1.4.1.3.pkg" sparkle:edSignature="X4rON13JRhG7VYeI0YyEeVtx+vR2zhV1gnAh0rr0IC4uenz/tGxgdjE0MQYSY7Vdi2xLEdYUHx9K71/48/YaBA==" length="3493668" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.4.1.2</title>
      <pubDate>Sat, 31 Jan 2026 20:16:33 +0000</pubDate>
      <sparkle:version>1.4.1.2</sparkle:version>
      <sparkle:shortVersionString>1.4.1.2</sparkle:shortVersionString>
      <description><![CDATA[Fix/use after free (#93)

* Fix use-after-free issue by copying touch data synchronously in DeviceMonitorDelegate

* Fix race conditions in restart handling by ensuring thread-safe access to restart state and work items

* Ensure thread safety in UI animations by using MainActor in MenuBarController

* Improve touch processing in MultitouchManager to handle zero touches and ensure gesture recognizer stability
---
**SHA256:** `d4c2c5fecdc2419954491edde356c2fd19281ee2c08e668ed8b05385dc532436`


[![Download MiddleDrag](https://a.fsdn.com/con/app/sf-download-button)](https://sourceforge.net/projects/middledrag.mirror/files/v1.4.1.2/MiddleDrag-1.4.1.2.pkg/download)]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.4.1.2/MiddleDrag-1.4.1.2.pkg" sparkle:edSignature="eqdvgIiS+bwA76bMvZha/UHBgXMILyTNnwsZs3XF2lgi+lPJxZ5UtWreLCaqFNV0Z3+FXiyB4MoP8oSmRhLfAg==" length="3497112" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.4.1.1</title>
      <pubDate>Wed, 28 Jan 2026 22:50:29 +0000</pubDate>
      <sparkle:version>1.4.1.1</sparkle:version>
      <sparkle:shortVersionString>1.4.1.1</sparkle:shortVersionString>
      <description><![CDATA[Hotfix: fixed drag incompatability issues introduced in 1.4.0
---
**SHA256:** `df9b43e8725f0910f56068a5f79cc33df4e634e99f60610482a3b60906757190`


[![Download MiddleDrag](https://a.fsdn.com/con/app/sf-download-button)](https://sourceforge.net/projects/middledrag.mirror/files/v1.4.1.1/MiddleDrag-1.4.1.1.pkg/download)]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.4.1.1/MiddleDrag-1.4.1.1.pkg" sparkle:edSignature="HOEKO19AkZwFeDrLxQKQ0VFHIk9y8/VxPYrTQGFfrIA0ogL+AqkLQRG7RUJSL3agWHD+/7/3ux5TA+fuOC/NBg==" length="3487220" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.4.1</title>
      <pubDate>Wed, 28 Jan 2026 08:27:22 +0000</pubDate>
      <sparkle:version>1.4.1</sparkle:version>
      <sparkle:shortVersionString>1.4.1</sparkle:shortVersionString>
      <description><![CDATA[
---
**SHA256:** `4cd61eef7d49039a9d0fce62233cbcb96b0fe17e7d35868a82050ad3c37ae902`


## What&apos;s Changed
* feat: add visual feedback when Force Release Stuck Drag is clicked by @NullPointerDepressiveDisorder in https://github.com/NullPointerDepressiveDisorder/MiddleDrag/pull/81
* 82 Bar Drag by @NullPointerDepressiveDisorder in https://github.com/NullPointerDepressiveDisorder/MiddleDrag/pull/83
* Multimonitor Support by @NullPointerDepressiveDisorder in https://github.com/NullPointerDepressiveDisorder/MiddleDrag/pull/85
* Update processing hang by @NullPointerDepressiveDisorder in https://github.com/NullPointerDepressiveDisorder/MiddleDrag/pull/88


**Full Changelog**: https://github.com/NullPointerDepressiveDisorder/MiddleDrag/compare/v1.4.0...v1.4.1

[![Download MiddleDrag](https://a.fsdn.com/con/app/sf-download-button)](https://sourceforge.net/projects/middledrag.mirror/files/v1.4.1/MiddleDrag-1.4.1.pkg/download)]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.4.1/MiddleDrag-1.4.1.pkg" sparkle:edSignature="l7QX3oCeg0hqYJWmI/h4BPWpo15cTON7SNV2t5lBEuaoQ6q/2qgKxmsEW/lp6i4LnbP0z5bL/nkoQnHUvoZEBg==" length="3487334" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.4.0</title>
      <pubDate>Fri, 23 Jan 2026 10:26:34 +0000</pubDate>
      <sparkle:version>1.4.0</sparkle:version>
      <sparkle:shortVersionString>1.4.0</sparkle:shortVersionString>
      <description><![CDATA[fix: prevent stuck middle-drag when events are swallowed (#78)

* fix: prevent stuck middle-drag when events are swallowed

Fixes #77 - Middle button gets stuck (no MIDDLE_UP) when:
- App focus changes mid-gesture
- Windows with nil/empty names (Find My, Finder, Wine apps)
- Rapid/overlapping gestures cause orphaned MIDDLE_DOWN

Changes:
- Add double-start guard: cancel existing drag before starting new one
- Add watchdog timer: auto-release after 10s of inactivity
- Add activity tracking: record last updateDrag() timestamp
- Add forceReleaseStuckDrag() API for manual recovery
- Add &apos;Force Release Stuck Drag&apos; menu item in Advanced menu

The watchdog sends multiple MIDDLE_UP events (sync + async) to ensure
release even if one is swallowed by problematic windows.

* test: add tests for stuck drag prevention

Add comprehensive tests for new stuck-drag prevention features:

MouseEventGeneratorTests (14 new tests):
- testDefaultStuckDragTimeout
- testStuckDragTimeoutCanBeModified
- testDoubleStartDragCancelsExistingDrag
- testTripleStartDragHandledGracefully
- testRapidStartEndCycles
- testStartDragWhileDraggingThenCancel
- testUpdateDragResetsActivityTime
- testWatchdogTimerStartsAndStopsWithDrag
- testCancelDragStopsWatchdog
- testVeryShortStuckDragTimeout
- testActivityPreventsWatchdogTimeout
- testDoubleStartWithUpdatesInBetween

MultitouchManagerTests (8 new tests):
- testForceReleaseStuckDragResetsGestureState
- testForceReleaseStuckDragResetsDraggingState
- testForceReleaseStuckDragWhenNotDragging
- testForceReleaseStuckDragMultipleTimes
- testForceReleaseStuckDragResetsGestureRecognizer
- testForceReleaseStuckDragWhileDisabled
- testForceReleaseStuckDragWhenStopped
- testForceReleaseAfterNormalEndDrag

* fix: address thread safety issues in stuck drag prevention

Address Copilot-identified race conditions in watchdog and force release:

MouseEventGenerator.swift:
- Add dragGeneration token to prevent async cleanup from affecting new drags
- Synchronize all watchdogTimer access on watchdogQueue
- Add stopWatchdogLocked() for internal calls already on watchdogQueue
- Add forceMiddleMouseUp() for unconditional MIDDLE_UP (always sends)
- Mark Sentry logging as unsafe for Swift 6 concurrency

MultitouchManager.swift:
- Wrap forceReleaseStuckDrag() in DispatchQueue.main.async to match
other gesture state updates and avoid data races
- Use forceMiddleMouseUp() instead of cancelDrag() to ensure UP is
sent even when internal state shows drag already ended

Fixes:
1. watchdogTimer data race from multi-thread access
2. Async force-release interfering with newly started drags
3. forceReleaseStuckDrag not sending UP when state already false
4. forceReleaseStuckDrag mutating state off main thread

* fix: protect dragGeneration with stateLock to prevent race condition

AI-identified bug: dragGeneration was accessed from multiple threads
without synchronization, creating a race between startDrag() on the
gesture thread and forceReleaseDrag() on watchdogQueue.

Race scenario:
1. startDrag() increments generation and sets isMiddleMouseDown=true
2. forceReleaseDrag() reads NEW generation, sets isMiddleMouseDown=false
3. Result: forceReleaseDrag&apos;s async cleanup matches generation and
sends MIDDLE_UP to the NEW drag, breaking it

Fix:
- Move dragGeneration to be protected by stateLock (as _dragGeneration)
- Make increment + flag set atomic in startDrag()
- Make read + flag clear atomic in forceReleaseDrag()
- Update forceMiddleMouseUp() with same atomic pattern

This ensures the generation token and drag state are always consistent.

* fix: prevent watchdog from clobbering new drag during double-start race

AI-identified bug: When a second startDrag() occurs ~10s after first (during
watchdog timeout check), a race condition causes the old watchdog&apos;s
forceReleaseDrag() to interfere with the new drag.

Race scenario:
1. Old watchdog&apos;s checkForStuckDrag() sees isMiddleMouseDown=true (old drag)
2. New startDrag() runs: sends UP, increments generation to N+1, sends DOWN
3. Old watchdog&apos;s forceReleaseDrag() runs:
- Reads generation=N+1 (the NEW one!)
- Sets isMiddleMouseDown=false (clobbers new drag!)
- Sends MIDDLE_UP (kills new drag!)

Result: UP -&gt; DOWN -&gt; UP = stuck button

Fix:
- checkForStuckDrag() now atomically captures BOTH isMiddleMouseDown AND
generation together, passing the generation to forceReleaseDrag()
- forceReleaseDrag() now takes expectedGeneration parameter and verifies
current generation matches before clearing state or sending events
- If generation doesn&apos;t match, a new drag started and we abort silently

This ensures the watchdog only affects the drag session it was checking.
---
**SHA256:** `7e6fb32d94a8475d5abf0a67009c59043f180f04b52f5e33fb9f24dae10df964`

fix: prevent stuck middle-drag when events are swallowed (#78)

* fix: prevent stuck middle-drag when events are swallowed

Fixes #77 - Middle button gets stuck (no MIDDLE_UP) when:
- App focus changes mid-gesture
- Windows with nil/empty names (Find My, Finder, Wine apps)
- Rapid/overlapping gestures cause orphaned MIDDLE_DOWN

Changes:
- Add double-start guard: cancel existing drag before starting new one
- Add watchdog timer: auto-release after 10s of inactivity
- Add activity tracking: record last updateDrag() timestamp
- Add forceReleaseStuckDrag() API for manual recovery
- Add &apos;Force Release Stuck Drag&apos; menu item in Advanced menu

The watchdog sends multiple MIDDLE_UP events (sync + async) to ensure
release even if one is swallowed by problematic windows.

* test: add tests for stuck drag prevention

Add comprehensive tests for new stuck-drag prevention features:

MouseEventGeneratorTests (14 new tests):
- testDefaultStuckDragTimeout
- testStuckDragTimeoutCanBeModified
- testDoubleStartDragCancelsExistingDrag
- testTripleStartDragHandledGracefully
- testRapidStartEndCycles
- testStartDragWhileDraggingThenCancel
- testUpdateDragResetsActivityTime
- testWatchdogTimerStartsAndStopsWithDrag
- testCancelDragStopsWatchdog
- testVeryShortStuckDragTimeout
- testActivityPreventsWatchdogTimeout
- testDoubleStartWithUpdatesInBetween

MultitouchManagerTests (8 new tests):
- testForceReleaseStuckDragResetsGestureState
- testForceReleaseStuckDragResetsDraggingState
- testForceReleaseStuckDragWhenNotDragging
- testForceReleaseStuckDragMultipleTimes
- testForceReleaseStuckDragResetsGestureRecognizer
- testForceReleaseStuckDragWhileDisabled
- testForceReleaseStuckDragWhenStopped
- testForceReleaseAfterNormalEndDrag

* fix: address thread safety issues in stuck drag prevention

Address Copilot-identified race conditions in watchdog and force release:

MouseEventGenerator.swift:
- Add dragGeneration token to prevent async cleanup from affecting new drags
- Synchronize all watchdogTimer access on watchdogQueue
- Add stopWatchdogLocked() for internal calls already on watchdogQueue
- Add forceMiddleMouseUp() for unconditional MIDDLE_UP (always sends)
- Mark Sentry logging as unsafe for Swift 6 concurrency

MultitouchManager.swift:
- Wrap forceReleaseStuckDrag() in DispatchQueue.main.async to match
other gesture state updates and avoid data races
- Use forceMiddleMouseUp() instead of cancelDrag() to ensure UP is
sent even when internal state shows drag already ended

Fixes:
1. watchdogTimer data race from multi-thread access
2. Async force-release interfering with newly started drags
3. forceReleaseStuckDrag not sending UP when state already false
4. forceReleaseStuckDrag mutating state off main thread

* fix: protect dragGeneration with stateLock to prevent race condition

AI-identified bug: dragGeneration was accessed from multiple threads
without synchronization, creating a race between startDrag() on the
gesture thread and forceReleaseDrag() on watchdogQueue.

Race scenario:
1. startDrag() increments generation and sets isMiddleMouseDown=true
2. forceReleaseDrag() reads NEW generation, sets isMiddleMouseDown=false
3. Result: forceReleaseDrag&apos;s async cleanup matches generation and
sends MIDDLE_UP to the NEW drag, breaking it

Fix:
- Move dragGeneration to be protected by stateLock (as _dragGeneration)
- Make increment + flag set atomic in startDrag()
- Make read + flag clear atomic in forceReleaseDrag()
- Update forceMiddleMouseUp() with same atomic pattern

This ensures the generation token and drag state are always consistent.

* fix: prevent watchdog from clobbering new drag during double-start race

AI-identified bug: When a second startDrag() occurs ~10s after first (during
watchdog timeout check), a race condition causes the old watchdog&apos;s
forceReleaseDrag() to interfere with the new drag.

Race scenario:
1. Old watchdog&apos;s checkForStuckDrag() sees isMiddleMouseDown=true (old drag)
2. New startDrag() runs: sends UP, increments generation to N+1, sends DOWN
3. Old watchdog&apos;s forceReleaseDrag() runs:
- Reads generation=N+1 (the NEW one!)
- Sets isMiddleMouseDown=false (clobbers new drag!)
- Sends MIDDLE_UP (kills new drag!)

Result: UP -&gt; DOWN -&gt; UP = stuck button

Fix:
- checkForStuckDrag() now atomically captures BOTH isMiddleMouseDown AND
generation together, passing the generation to forceReleaseDrag()
- forceReleaseDrag() now takes expectedGeneration parameter and verifies
current generation matches before clearing state or sending events
- If generation doesn&apos;t match, a new drag started and we abort silently

This ensures the watchdog only affects the drag session it was checking.
---
**SHA256:** `1ba647772a7c88f924d0c79b2ebde3f227743aa485b4787fee6d03509ed698cb`]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.4.0/MiddleDrag-1.4.0.pkg" sparkle:edSignature="UcJMs7EoCW8LXJmL1GVm/F4E1V3Sf7OJ4fC1cVgi6fopl9huUsu8tbsYIUb7k+UIqH0N2ywOaBcdGrbxAY7lBA==" length="3466879" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.3.8.9</title>
      <pubDate>Thu, 22 Jan 2026 05:02:11 +0000</pubDate>
      <sparkle:version>1.3.8.9</sparkle:version>
      <sparkle:shortVersionString>1.3.8.9</sparkle:shortVersionString>
      <description><![CDATA[Add permissions for package-and-certify workflow

Signed-off-by: Karan Mohindroo &lt;96403086+NullPointerDepressiveDisorder@users.noreply.github.com&gt;
---
**SHA256:** `3e55a3411d5d315183efbec1eb605365b124edfdc5bf37a3a13e9e10d3531cee`

Add permissions for package-and-certify workflow

Signed-off-by: Karan Mohindroo &lt;96403086+NullPointerDepressiveDisorder@users.noreply.github.com&gt;
---
**SHA256:** `78de1de3cf09ba1c255b61d3261af1599b0b6648df518e04bc6eeb1a7d116767`]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.3.8.9/MiddleDrag-1.3.8.9.pkg" sparkle:edSignature="1IiOYSqFPwUUuta4TUhZAXTy/tX7EGgqXhQllJYXhaxhr5K6H8p4SH95Z3gK5l36kzlCw+PY75rG2J4vKo0qBQ==" length="3451252" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.3.8.8</title>
      <pubDate>Wed, 21 Jan 2026 10:12:16 +0000</pubDate>
      <sparkle:version>1.3.8.8</sparkle:version>
      <sparkle:shortVersionString>1.3.8.8</sparkle:shortVersionString>
      <description><![CDATA[Refactor/documentation (#75)

* Add trademark section to README.md

- Introduced a new section outlining the trademark status of &quot;MiddleDrag,&quot; clarifying its ownership and usage rights.
- Specified acceptable uses of the trademark, including forks for contribution and factual references, while advising against using the name for separate projects to prevent user confusion.

* Update dependencies in Package.swift and project configuration

- Added new dependencies for `swift-docc-plugin` and `swift-docc-symbolkit` in Package.swift to enhance documentation capabilities.
- Updated project.pbxproj to include the new `snippet-extract` framework, ensuring proper integration of the new dependencies.
- Modified Package.resolved to reflect the latest versions of the added packages, maintaining consistency across the project.

* Update Package.swift and project configuration to add MiddleDrag target

- Introduced a new target named &quot;MiddleDrag&quot; in Package.swift, with dependencies on Sentry and Sparkle.
- Updated project.pbxproj to include references for the new target and documentation files, enhancing project structure and documentation capabilities.
- Enabled documentation compiler settings to support the new target&apos;s documentation requirements.

* fix: protect isMiddleMouseDown with lock for thread safety

The isMiddleMouseDown property was read from multiple threads (updateDrag
on gesture queue) but written on eventQueue without synchronization.

Added stateLock (NSLock) with computed property getter/setter using
withLock to ensure thread-safe access to the drag state flag.

* refactor: add @MainActor to UI helper classes

WindowHelper and AlertHelper use AppKit APIs (NSEvent.mouseLocation,
NSScreen.main, NSRunningApplication, NSAlert, NSWorkspace) that require
main thread execution.

- WindowHelper: Added @MainActor class annotation, Sendable to WindowInfo
- AlertHelper: Added @MainActor to class and AlertPresenter protocol

* refactor: add Sendable conformance to model types

Mark value types as Sendable for safe cross-isolation transfer:

- GestureModels: GestureState, GestureConfiguration, ModifierKeyType,
UserPreferences
- TouchModels: MTPoint, MTVector, MTTouch, TouchState, TrackedFinger
- GestureRecognizer: GestureData

These are all structs/enums with only Sendable properties, making them
safe to pass across actor boundaries.

* refactor: update callers for MainActor-isolated helpers

Update call sites to properly invoke @MainActor-isolated WindowHelper
and AlertHelper methods:

- MultitouchManager: Wrap WindowHelper calls with MainActor.assumeIsolated
when on main thread, or DispatchQueue.main.sync for background threads
- AppDelegate: Mark showGestureConfigurationPromptOnFirstLaunch as
@MainActor and wrap asyncAfter callback with MainActor.assumeIsolated

* test: add @MainActor to test classes for UI components

Tests that call @MainActor-isolated methods must also be MainActor-
isolated to avoid async context errors:

- WindowHelperTests: @MainActor on test class
- AlertHelperTests: @MainActor on MockAlertPresenter and test class
- MenuBarControllerTests: @MainActor on test class

* build: set targeted concurrency checking level

Change SWIFT_STRICT_CONCURRENCY from &apos;complete&apos; to &apos;targeted&apos; at the
target level for both Debug and Release configurations.

Complete checking fights the architecture constantly for C-callback
based input processing code. Targeted provides useful warnings without
demanding full actor isolation on callbacks that can&apos;t be isolated.

Also fix Package.swift: replace invalid enableUpcomingFeature syntax
with .swiftLanguageMode(.v5) for proper Swift 5 semantics with targeted
concurrency during documentation generation.

* refactor: add @MainActor to MenuBarController

MenuBarController manages NSStatusItem and NSMenu which are AppKit
UI components requiring main thread execution.

Also refactor status icon animation to avoid Sendable closure issues
with NSAnimationContext.runAnimationGroup by using the explicit
beginGrouping/endGrouping pattern.

* chore: update Package.resolved

* chore: update project configuration and scripts

- Added a new script &quot;watch:css&quot; to package.json for live CSS rebuilding.
- Removed references to the `swift-docc-plugin` and `snippet-extract` from Package.swift and project.pbxproj, streamlining dependencies.
- Updated Package.resolved to reflect the removal of the `swift-docc-plugin`.

* fix: mark singleton classes as @unchecked Sendable

These classes use thread-safe internal mechanisms:
- MultitouchFramework: Stateless C function wrapper
- PreferencesManager: UserDefaults is thread-safe
- CrashReporter: Sentry SDK + UserDefaults are thread-safe
- LaunchAtLoginManager: ServiceManagement APIs are thread-safe
- UpdateManager: Sparkle accessed from main thread

Also add nonisolated(unsafe) to static shared properties to
silence Swift 6 concurrency warnings for singleton access.

* fix: add Sendable conformance to core manager classes

- MouseEventGenerator: @unchecked Sendable, uses internal locks
- AccessibilityMonitor: @unchecked Sendable, timer on main thread
- MultitouchManager: Clarify pointer lifecycle in async closure

These classes manage their own thread safety through locks and
dispatch queues, making @unchecked Sendable appropriate.

* fix: resolve AppDelegate typos and unsafe markers

- Fix &apos;references&apos; typo to &apos;preferences&apos;
- Fix &apos;lunsafe et enabled&apos; typo to &apos;let enabled&apos;
- Remove stray &apos;unsafe&apos; keyword from LaunchAtLoginManager calls
- Use string literal for kAXTrustedCheckOptionPrompt to avoid
global mutable state warning

* chore: remove unused variable binding in MenuBarController

* chore: simplify Package.swift by removing unused swiftSettings for MiddleDrag

* Update README.md

Co-authored-by: Copilot &lt;175728472+Copilot@users.noreply.github.com&gt;
Signed-off-by: Karan Mohindroo &lt;96403086+NullPointerDepressiveDisorder@users.noreply.github.com&gt;

* fix: use windowID for bundle ID lookup in WindowHelper

When looking up the bundle identifier after finding a window, use
the windowID from the initial match instead of re-matching by point
and bounds. This prevents returning the wrong bundle ID when multiple
windows overlap at the same point.

* fix: use animation completion handler in MenuBarController

Revert to NSAnimationContext.runAnimationGroup with completion handler
instead of hardcoded asyncAfter delay. This ensures the alpha restoration
timing stays in sync if animation duration changes.

* fix: remove unnecessary MainActor.assumeIsolated wrapper

AppDelegate is @MainActor and showGestureConfigurationPromptOnFirstLaunch
is @MainActor, so calling it from DispatchQueue.main.asyncAfter doesn&apos;t
need the extra isolation wrapper.

* test: add coverage for windowID-based bundle ID lookup

Add 6 new tests verifying the windowID-based lookup logic:
- testGetWindowAt_WithMockData_OverlappingWindows_UsesWindowIDForBundleLookup
- testGetWindowAt_WithMockData_WindowIDMatchEnsuresCorrectWindow
- testGetWindowAt_WithMockData_MultipleWindowsSameSize
- testGetWindowAt_WithMockData_WindowIDUsedNotPointReMatch
- testGetWindowAt_NonisolatedMethod_ReturnsNilBundleID

These tests ensure that when looking up bundle identifiers for overlapping
windows, we use the windowID from the initial match rather than re-searching
by point, which could return wrong results.

* test: add coverage for getBundleIdentifier lookup

Add injectable bundleIdentifierLookup parameter to getWindowAt for testing.
The production code passes the real getBundleIdentifier function, while
tests can inject mock lookups.

New tests verify:
- Bundle ID is populated when lookup returns a value
- Correct PID is passed to the lookup function
- Bundle ID is nil when lookup returns nil
- Overlapping windows use correct PID (from first match via windowID)
- Windows without ownerPID don&apos;t call lookup
- Different PIDs can return different bundle IDs

* test: add coverage for MainActor.assumeIsolated thread-safety patterns

Add 8 tests verifying thread-safety of WindowHelper calls in MultitouchManager:

- testIgnoreDesktopCheckFromMainThread: isCursorOverDesktop from main thread
- testIgnoreDesktopCheckFromBackgroundThread: isCursorOverDesktop via sync
- testWindowSizeFilterCheckFromMainThread_Drag: windowAtCursorMeetsMinimumSize
- testWindowSizeFilterCheckFromBackgroundThread_Drag: same via sync
- testWindowSizeFilterCheckFromMainThread_Tap: tap variant
- testWindowSizeFilterCheckFromBackgroundThread_Tap: tap variant via sync
- testCombinedIgnoreDesktopAndWindowSizeFilterFromBackgroundThread: both
- testMainActorIsolatedCallsDoNotDeadlock: stress test for deadlock prevention

These tests verify that MainActor.assumeIsolated calls work correctly
whether called from main thread (direct) or background thread (via
DispatchQueue.main.sync).

---------

Signed-off-by: Karan Mohindroo &lt;96403086+NullPointerDepressiveDisorder@users.noreply.github.com&gt;
Co-authored-by: Copilot &lt;175728472+Copilot@users.noreply.github.com&gt;
---
**SHA256:** `635caff264724f5d0d36ad9e99d7df7cf4fad37fa4d1e854c7cc429002c22028`

Refactor/documentation (#75)

* Add trademark section to README.md

- Introduced a new section outlining the trademark status of &quot;MiddleDrag,&quot; clarifying its ownership and usage rights.
- Specified acceptable uses of the trademark, including forks for contribution and factual references, while advising against using the name for separate projects to prevent user confusion.

* Update dependencies in Package.swift and project configuration

- Added new dependencies for `swift-docc-plugin` and `swift-docc-symbolkit` in Package.swift to enhance documentation capabilities.
- Updated project.pbxproj to include the new `snippet-extract` framework, ensuring proper integration of the new dependencies.
- Modified Package.resolved to reflect the latest versions of the added packages, maintaining consistency across the project.

* Update Package.swift and project configuration to add MiddleDrag target

- Introduced a new target named &quot;MiddleDrag&quot; in Package.swift, with dependencies on Sentry and Sparkle.
- Updated project.pbxproj to include references for the new target and documentation files, enhancing project structure and documentation capabilities.
- Enabled documentation compiler settings to support the new target&apos;s documentation requirements.

* fix: protect isMiddleMouseDown with lock for thread safety

The isMiddleMouseDown property was read from multiple threads (updateDrag
on gesture queue) but written on eventQueue without synchronization.

Added stateLock (NSLock) with computed property getter/setter using
withLock to ensure thread-safe access to the drag state flag.

* refactor: add @MainActor to UI helper classes

WindowHelper and AlertHelper use AppKit APIs (NSEvent.mouseLocation,
NSScreen.main, NSRunningApplication, NSAlert, NSWorkspace) that require
main thread execution.

- WindowHelper: Added @MainActor class annotation, Sendable to WindowInfo
- AlertHelper: Added @MainActor to class and AlertPresenter protocol

* refactor: add Sendable conformance to model types

Mark value types as Sendable for safe cross-isolation transfer:

- GestureModels: GestureState, GestureConfiguration, ModifierKeyType,
UserPreferences
- TouchModels: MTPoint, MTVector, MTTouch, TouchState, TrackedFinger
- GestureRecognizer: GestureData

These are all structs/enums with only Sendable properties, making them
safe to pass across actor boundaries.

* refactor: update callers for MainActor-isolated helpers

Update call sites to properly invoke @MainActor-isolated WindowHelper
and AlertHelper methods:

- MultitouchManager: Wrap WindowHelper calls with MainActor.assumeIsolated
when on main thread, or DispatchQueue.main.sync for background threads
- AppDelegate: Mark showGestureConfigurationPromptOnFirstLaunch as
@MainActor and wrap asyncAfter callback with MainActor.assumeIsolated

* test: add @MainActor to test classes for UI components

Tests that call @MainActor-isolated methods must also be MainActor-
isolated to avoid async context errors:

- WindowHelperTests: @MainActor on test class
- AlertHelperTests: @MainActor on MockAlertPresenter and test class
- MenuBarControllerTests: @MainActor on test class

* build: set targeted concurrency checking level

Change SWIFT_STRICT_CONCURRENCY from &apos;complete&apos; to &apos;targeted&apos; at the
target level for both Debug and Release configurations.

Complete checking fights the architecture constantly for C-callback
based input processing code. Targeted provides useful warnings without
demanding full actor isolation on callbacks that can&apos;t be isolated.

Also fix Package.swift: replace invalid enableUpcomingFeature syntax
with .swiftLanguageMode(.v5) for proper Swift 5 semantics with targeted
concurrency during documentation generation.

* refactor: add @MainActor to MenuBarController

MenuBarController manages NSStatusItem and NSMenu which are AppKit
UI components requiring main thread execution.

Also refactor status icon animation to avoid Sendable closure issues
with NSAnimationContext.runAnimationGroup by using the explicit
beginGrouping/endGrouping pattern.

* chore: update Package.resolved

* chore: update project configuration and scripts

- Added a new script &quot;watch:css&quot; to package.json for live CSS rebuilding.
- Removed references to the `swift-docc-plugin` and `snippet-extract` from Package.swift and project.pbxproj, streamlining dependencies.
- Updated Package.resolved to reflect the removal of the `swift-docc-plugin`.

* fix: mark singleton classes as @unchecked Sendable

These classes use thread-safe internal mechanisms:
- MultitouchFramework: Stateless C function wrapper
- PreferencesManager: UserDefaults is thread-safe
- CrashReporter: Sentry SDK + UserDefaults are thread-safe
- LaunchAtLoginManager: ServiceManagement APIs are thread-safe
- UpdateManager: Sparkle accessed from main thread

Also add nonisolated(unsafe) to static shared properties to
silence Swift 6 concurrency warnings for singleton access.

* fix: add Sendable conformance to core manager classes

- MouseEventGenerator: @unchecked Sendable, uses internal locks
- AccessibilityMonitor: @unchecked Sendable, timer on main thread
- MultitouchManager: Clarify pointer lifecycle in async closure

These classes manage their own thread safety through locks and
dispatch queues, making @unchecked Sendable appropriate.

* fix: resolve AppDelegate typos and unsafe markers

- Fix &apos;references&apos; typo to &apos;preferences&apos;
- Fix &apos;lunsafe et enabled&apos; typo to &apos;let enabled&apos;
- Remove stray &apos;unsafe&apos; keyword from LaunchAtLoginManager calls
- Use string literal for kAXTrustedCheckOptionPrompt to avoid
global mutable state warning

* chore: remove unused variable binding in MenuBarController

* chore: simplify Package.swift by removing unused swiftSettings for MiddleDrag

* Update README.md

Co-authored-by: Copilot &lt;175728472+Copilot@users.noreply.github.com&gt;
Signed-off-by: Karan Mohindroo &lt;96403086+NullPointerDepressiveDisorder@users.noreply.github.com&gt;

* fix: use windowID for bundle ID lookup in WindowHelper

When looking up the bundle identifier after finding a window, use
the windowID from the initial match instead of re-matching by point
and bounds. This prevents returning the wrong bundle ID when multiple
windows overlap at the same point.

* fix: use animation completion handler in MenuBarController

Revert to NSAnimationContext.runAnimationGroup with completion handler
instead of hardcoded asyncAfter delay. This ensures the alpha restoration
timing stays in sync if animation duration changes.

* fix: remove unnecessary MainActor.assumeIsolated wrapper

AppDelegate is @MainActor and showGestureConfigurationPromptOnFirstLaunch
is @MainActor, so calling it from DispatchQueue.main.asyncAfter doesn&apos;t
need the extra isolation wrapper.

* test: add coverage for windowID-based bundle ID lookup

Add 6 new tests verifying the windowID-based lookup logic:
- testGetWindowAt_WithMockData_OverlappingWindows_UsesWindowIDForBundleLookup
- testGetWindowAt_WithMockData_WindowIDMatchEnsuresCorrectWindow
- testGetWindowAt_WithMockData_MultipleWindowsSameSize
- testGetWindowAt_WithMockData_WindowIDUsedNotPointReMatch
- testGetWindowAt_NonisolatedMethod_ReturnsNilBundleID

These tests ensure that when looking up bundle identifiers for overlapping
windows, we use the windowID from the initial match rather than re-searching
by point, which could return wrong results.

* test: add coverage for getBundleIdentifier lookup

Add injectable bundleIdentifierLookup parameter to getWindowAt for testing.
The production code passes the real getBundleIdentifier function, while
tests can inject mock lookups.

New tests verify:
- Bundle ID is populated when lookup returns a value
- Correct PID is passed to the lookup function
- Bundle ID is nil when lookup returns nil
- Overlapping windows use correct PID (from first match via windowID)
- Windows without ownerPID don&apos;t call lookup
- Different PIDs can return different bundle IDs

* test: add coverage for MainActor.assumeIsolated thread-safety patterns

Add 8 tests verifying thread-safety of WindowHelper calls in MultitouchManager:

- testIgnoreDesktopCheckFromMainThread: isCursorOverDesktop from main thread
- testIgnoreDesktopCheckFromBackgroundThread: isCursorOverDesktop via sync
- testWindowSizeFilterCheckFromMainThread_Drag: windowAtCursorMeetsMinimumSize
- testWindowSizeFilterCheckFromBackgroundThread_Drag: same via sync
- testWindowSizeFilterCheckFromMainThread_Tap: tap variant
- testWindowSizeFilterCheckFromBackgroundThread_Tap: tap variant via sync
- testCombinedIgnoreDesktopAndWindowSizeFilterFromBackgroundThread: both
- testMainActorIsolatedCallsDoNotDeadlock: stress test for deadlock prevention

These tests verify that MainActor.assumeIsolated calls work correctly
whether called from main thread (direct) or background thread (via
DispatchQueue.main.sync).

---------

Signed-off-by: Karan Mohindroo &lt;96403086+NullPointerDepressiveDisorder@users.noreply.github.com&gt;
Co-authored-by: Copilot &lt;175728472+Copilot@users.noreply.github.com&gt;
---
**SHA256:** `33b574cc774bcafae73078ebd3d9bed35207ce6f491f9f4bf35d0d94a2448b3c`]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.3.8.8/MiddleDrag-1.3.8.8.pkg" sparkle:edSignature="S1Bn4IjFGTmj+O97l4dzfpsOqFpPQhyk6SaAOECw1fgjQCYejpOKvFCFMwlrhrZPiJms5taX4fHQoKB/y38bAA==" length="3448234" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.3.8.7</title>
      <pubDate>Fri, 16 Jan 2026 02:58:09 +0000</pubDate>
      <sparkle:version>1.3.8.7</sparkle:version>
      <sparkle:shortVersionString>1.3.8.7</sparkle:shortVersionString>
      <description><![CDATA[Enhance mouse event handling and logging for improved drag performance (#69)

* Enhance mouse event handling and logging for improved drag performance

- Updated the MouseEventGenerator to track the last sent mouse position, preventing jumps from stale positions during drag operations.
- Implemented smoothing for mouse movement updates, allowing for more consistent and responsive drag actions.
- Enhanced logging to detect and report potential snap-back issues during horizontal drag movements, integrating with Sentry for telemetry.
- Modified AppDelegate to include session ID in startup logs for better tracking.
- Improved MultitouchManager to ensure proper handling of force clicks and drag states, preventing interference during active drags.
- Added setup and teardown methods in AnalyticsManagerTests to isolate test cases and ensure consistent state.

* Refactor mouse event handling to improve thread safety and logging

- Updated MouseEventGenerator to read the current mouse position before acquiring a lock, enhancing thread safety during drag operations.
- Simplified telemetry logging by consolidating the guard statement, ensuring logs are only sent when telemetry is enabled.
- Retained the sendRelativeMouseMove function for potential future use while clarifying its purpose in comments.
---
**SHA256:** `04df585d0a712fa1979014d4f2ffb86702fdd54736c443e5c47a0303b46ea562`]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.3.8.7/MiddleDrag-1.3.8.7.pkg" sparkle:edSignature="ZSRKprzlkxgkRBZq5/lKAunOUNKPXt7EXcF9/NQ/R1GzzEMJuPFTNCItjSuFRG2YCLSEMW+R6S6pnby2IX1NDw==" length="3098947" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
    <item>
      <title>Version 1.3.8.6</title>
      <pubDate>Wed, 14 Jan 2026 03:24:39 +0000</pubDate>
      <sparkle:version>1.3.8.6</sparkle:version>
      <sparkle:shortVersionString>1.3.8.6</sparkle:shortVersionString>
      <description><![CDATA[Refactor preinstall script in CI workflow

- Updated the preinstall script to improve formatting and readability by removing leading whitespace.
- Ensured the script correctly handles quitting the MiddleDrag app, removing existing installations, and forgetting previous package receipts.

These changes enhance the clarity and maintainability of the installation process.
---
**SHA256:** `e50363051103ce5c2df266347bf7dfae7a10745b0e67f4a5489b270782637e75`

Refactor preinstall script in CI workflow

- Updated the preinstall script to improve formatting and readability by removing leading whitespace.
- Ensured the script correctly handles quitting the MiddleDrag app, removing existing installations, and forgetting previous package receipts.

These changes enhance the clarity and maintainability of the installation process.
---
**SHA256:** `2520a97c1672f09b26eb4a1ee46ba409389a328cf4312db2c0adfa54bd057b44`]]></description>
      <enclosure url="https://github.com/NullPointerDepressiveDisorder/MiddleDrag/releases/download/v1.3.8.6/MiddleDrag-1.3.8.6.pkg" sparkle:edSignature="SBJ6q0gkHtAMn1308le5aSBqQYCo0I9DbkD/AX1tFpqno4liYLCvIY47SesY4GYhzlp+WKn9QMVU6abYlf/SDw==" length="3090064" type="application/octet-stream" />
      <sparkle:minimumSystemVersion>15.0</sparkle:minimumSystemVersion>
    </item>
  </channel>
</rss>
